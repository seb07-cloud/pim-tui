# Requirements Archive: v1.2 UI Polish & Auth UX

**Archived:** 2026-01-16
**Status:** ✅ SHIPPED

This is the archived requirements specification for v1.1 and v1.2 (combined milestones).
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: pim-tui

**Defined:** 2026-01-16
**Core Value:** Fast, reliable role activation without leaving the terminal

## v1 Requirements

Requirements for v1.1 Refactor & Reliability and v1.2 UI Polish & Auth UX milestones. Each maps to roadmap phases.

### Architecture

- [x] **ARCH-01**: All Azure API calls use native REST with `azidentity` (no `az rest` CLI shelling)
- [x] **ARCH-02**: Codebase follows consistent patterns (simplified, cleaned up)

### Performance

- [x] **PERF-01**: Subscription fetching uses tenant name cache (one lookup per tenant, not per subscription)
- [x] **PERF-02**: API responses support pagination for large result sets

### UI

- [x] **UI-01**: Scrolling within a panel keeps all panels fixed in position (only content scrolls)
- [x] **UI-02**: Startup steps display in correct order (no race condition in display)
- [x] **UI-03**: Selected role/group row is clearly highlighted (white or inverted)
- [x] **UI-04**: Long permission strings wrap at path segments with proper indentation

### Testing

- [x] **TEST-01**: Azure client methods have unit test coverage
- [x] **TEST-02**: UI state transitions have unit test coverage
- [x] **TEST-03**: Config loading has unit test coverage

### Reliability

- [x] **REL-01**: Parallel goroutines use proper synchronization (no race conditions)
- [x] **REL-02**: Group activation uses actual roleDefinitionId from assignment (not hardcoded "member")
- [x] **REL-03**: All errors are logged (no silent swallowing)
- [x] **REL-04**: Dead code removed (spinnerPulse function, etc.)

### Robustness

- [x] **ROB-01**: Application handles SIGINT/SIGTERM gracefully
- [x] **ROB-02**: Credentials refresh automatically during long sessions
- [x] **ROB-03**: Justification input is validated (character limits, control characters filtered)

### Authentication UX

- [x] **AUTH-01**: User can authenticate from within the app (no restart needed) - browser auth instead of device code per user request

## v2 Requirements

Deferred to future releases.

(None — this milestone was refactor-focused)

## Out of Scope

Explicitly excluded. Documented to prevent scope creep.

| Feature | Reason |
|---------|--------|
| New features | This is refactor only |
| Offline mode / data caching | Deferred to future milestone |
| Persistent file logging | In-memory logging sufficient |
| GUI version | Terminal-only product |

## Traceability

Which phases cover which requirements.

| Requirement | Phase | Status |
|-------------|-------|--------|
| ARCH-01 | Phase 1 | Complete |
| ARCH-02 | Phase 2 | Complete |
| PERF-01 | Phase 3 | Complete |
| PERF-02 | Phase 3 | Complete |
| UI-01 | Phase 4 | Complete |
| TEST-01 | Phase 7 | Complete |
| TEST-02 | Phase 7 | Complete |
| TEST-03 | Phase 7 | Complete |
| REL-01 | Phase 5 | Complete |
| REL-02 | Phase 5 | Complete |
| REL-03 | Phase 5 | Complete |
| REL-04 | Phase 2 | Complete |
| ROB-01 | Phase 6 | Complete |
| ROB-02 | Phase 6 | Complete |
| ROB-03 | Phase 6 | Complete |
| UI-02 | Phase 8 | Complete |
| UI-03 | Phase 8 | Complete |
| UI-04 | Phase 8 | Complete |
| AUTH-01 | Phase 9 | Complete |

**Coverage:**
- v1 requirements: 19 total
- Shipped: 19 ✓
- Unmapped: 0

---

## Milestone Summary

**Shipped:** 19 of 19 v1 requirements
**Adjusted:** AUTH-01 changed from device code to browser auth (per user request — device code blocked by security policies)
**Dropped:** None

---
*Archived: 2026-01-16 as part of v1.2 milestone completion*
